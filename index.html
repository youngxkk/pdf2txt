<!-- Created by yangxinkun on 2025.12.31 -->
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Extractor Pro | Secure & Local</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        dark: '#111827',
                        darkcard: '#1F2937',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.5s ease-out',
                        'slide-down': 'slideDown 0.2s ease-out',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideDown: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #4b5563; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(229, 231, 235, 0.5);
        }
        .dark .glass-panel {
            background: rgba(17, 24, 39, 0.9);
            border-bottom: 1px solid rgba(55, 65, 81, 0.5);
        }

        .drag-active {
            border-color: #4F46E5 !important;
            background-color: rgba(79, 70, 229, 0.05) !important;
            transform: scale(1.01);
        }
        
        #lang-dropdown {
            transform-origin: top right;
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col font-sans">

    <!-- Navbar -->
    <nav class="w-full glass-panel sticky top-0 z-50 transition-colors duration-300">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="bg-indigo-600 text-white p-2 rounded-lg shadow-lg shadow-indigo-500/30">
                        <i class="fa-solid fa-file-pdf text-lg"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight">PDF <span class="text-indigo-600 dark:text-indigo-400">Extractor</span></span>
                </div>

                <!-- Controls -->
                <div class="flex items-center gap-2 relative">
                    <!-- Language Dropdown -->
                    <div class="relative">
                        <button id="lang-btn" onclick="toggleLangDropdown(event)" class="flex items-center gap-2 px-3 py-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all border border-gray-200 dark:border-gray-700 font-medium text-sm focus:outline-none">
                            <i class="fa-solid fa-globe"></i>
                            <span id="current-lang-text">English</span>
                            <i class="fa-solid fa-chevron-down text-[10px] ml-1 opacity-50"></i>
                        </button>

                        <!-- Dropdown Menu -->
                        <div id="lang-dropdown" class="absolute right-0 mt-2 w-52 bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl hidden animate-slide-down z-50 overflow-hidden">
                            <div class="p-1">
                                <button onclick="selectLanguage('en')" class="lang-option w-full flex items-center justify-between px-3 py-2.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-sm transition-colors group" data-lang="en">
                                    <span class="text-gray-700 dark:text-gray-200">English</span>
                                    <i class="fa-solid fa-check text-indigo-600 dark:text-indigo-400 opacity-0 group-[.active]:opacity-100"></i>
                                </button>
                                <button onclick="selectLanguage('zh')" class="lang-option w-full flex items-center justify-between px-3 py-2.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-sm transition-colors group" data-lang="zh">
                                    <span class="text-gray-700 dark:text-gray-200">简体中文</span>
                                    <i class="fa-solid fa-check text-indigo-600 dark:text-indigo-400 opacity-0 group-[.active]:opacity-100"></i>
                                </button>
                                <button onclick="selectLanguage('tw')" class="lang-option w-full flex items-center justify-between px-3 py-2.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-sm transition-colors group" data-lang="tw">
                                    <span class="text-gray-700 dark:text-gray-200">繁體中文</span>
                                    <i class="fa-solid fa-check text-indigo-600 dark:text-indigo-400 opacity-0 group-[.active]:opacity-100"></i>
                                </button>
                                <button onclick="selectLanguage('ja')" class="lang-option w-full flex items-center justify-between px-3 py-2.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-sm transition-colors group" data-lang="ja">
                                    <span class="text-gray-700 dark:text-gray-200">日本語</span>
                                    <i class="fa-solid fa-check text-indigo-600 dark:text-indigo-400 opacity-0 group-[.active]:opacity-100"></i>
                                </button>
                                <button onclick="selectLanguage('fr')" class="lang-option w-full flex items-center justify-between px-3 py-2.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-sm transition-colors group" data-lang="fr">
                                    <span class="text-gray-700 dark:text-gray-200">Français</span>
                                    <i class="fa-solid fa-check text-indigo-600 dark:text-indigo-400 opacity-0 group-[.active]:opacity-100"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Dark Mode Toggle -->
                    <button id="theme-toggle" onclick="toggleTheme()" class="p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-amber-500 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-yellow-300 transition-all focus:outline-none">
                        <i id="theme-icon" class="fa-solid fa-moon text-lg"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-5xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
        
        <!-- Hero Section -->
        <div class="text-center mb-12 animate-fade-in-up">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 tracking-tight text-slate-900 dark:text-white">
                <span data-i18n="heroTitle">Convert PDF to Text Instantly</span>
            </h1>
            <p class="text-lg text-slate-600 dark:text-gray-400 max-w-2xl mx-auto" data-i18n="heroSubtitle">
                Securely extract text from your documents directly in your browser. No upload to server. Export to Markdown or TXT.
            </p>
        </div>

        <!-- Upload Section -->
        <div id="upload-section" class="max-w-3xl mx-auto transition-all duration-300 animate-fade-in-up">
            <div id="drop-zone" class="relative group cursor-pointer bg-white dark:bg-darkcard rounded-3xl border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-xl transition-all duration-300 p-12 text-center overflow-hidden">
                <input type="file" id="file-input" class="hidden" accept="application/pdf">
                <div class="relative z-10">
                    <div class="w-20 h-20 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-sm group-hover:scale-110 transition-transform duration-300">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="dropTitle">Click or Drag PDF Here</h3>
                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-6" data-i18n="dropSubtitle">Supports PDFs of any size</p>
                    <button class="bg-indigo-600 text-white px-8 py-3 rounded-full font-medium hover:bg-indigo-700 hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-95" data-i18n="selectFileBtn">Select File</button>
                </div>
            </div>
        </div>

        <!-- Loading Section -->
        <div id="loading-section" class="hidden max-w-3xl mx-auto text-center py-16">
            <div class="relative w-20 h-20 mx-auto mb-8">
                <div class="absolute inset-0 border-4 border-indigo-100 dark:border-gray-700 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-indigo-600 dark:border-indigo-500 rounded-full border-t-transparent animate-spin"></div>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="processingTitle">Processing Document...</h3>
            <p id="progress-text" class="text-gray-500 dark:text-gray-400">Initializing engine...</p>
        </div>

        <!-- Result Section -->
        <div id="result-section" class="hidden flex flex-col animate-fade-in-up">
            <!-- Toolbar -->
            <div class="bg-white dark:bg-darkcard rounded-t-2xl border border-b-0 border-gray-200 dark:border-gray-700 p-4 flex flex-col md:flex-row justify-between items-center gap-4 shadow-sm z-10">
                <div class="flex items-center gap-3 w-full md:w-auto">
                    <div class="w-10 h-10 bg-red-100 dark:bg-red-900/30 text-red-500 dark:text-red-400 rounded-lg flex items-center justify-center shrink-0">
                        <i class="fa-solid fa-file-pdf"></i>
                    </div>
                    <div class="min-w-0">
                        <h4 id="file-name" class="font-bold text-gray-800 dark:text-gray-100 truncate max-w-[150px] md:max-w-[200px]">doc.pdf</h4>
                        <span id="page-count" class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full">0 pages</span>
                    </div>
                </div>

                <div class="flex flex-wrap justify-end gap-2 w-full md:w-auto">
                    <button onclick="formatToMarkdown()" class="px-3 py-2 text-sm bg-amber-500 hover:bg-amber-600 text-white rounded-lg shadow-sm transition-colors flex items-center gap-2">
                        <i class="fa-solid fa-wand-magic-sparkles"></i> <span class="hidden sm:inline" data-i18n="btnBeautify">Beautify</span>
                    </button>
                    <div class="h-6 w-px bg-gray-300 dark:bg-gray-600 mx-1 self-center hidden md:block"></div>
                    <button onclick="copyText()" class="px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                    <button onclick="downloadFile('txt')" class="px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2">
                        <i class="fa-solid fa-file-lines"></i> TXT
                    </button>
                    <button onclick="downloadFile('md')" class="px-3 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow-md transition-colors flex items-center gap-2">
                        <i class="fa-brands fa-markdown"></i> MD
                    </button>
                    <button onclick="resetApp()" class="ml-1 px-3 py-2 text-gray-400 hover:text-red-500 transition-colors">
                        <i class="fa-solid fa-rotate-right"></i>
                    </button>
                </div>
            </div>

            <!-- Editor -->
            <div class="relative h-[600px] group">
                <textarea id="output-text" class="w-full h-full p-6 resize-none bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-b-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-colors custom-scrollbar text-gray-700 dark:text-gray-300 leading-relaxed font-mono text-sm" spellcheck="false"></textarea>
                <div class="absolute top-4 right-6 text-xs text-gray-300 dark:text-gray-600 pointer-events-none" data-i18n="editorLabel">Editable Area</div>
            </div>

            <p class="text-center text-gray-400 dark:text-gray-500 text-sm mt-6">
                <i class="fa-solid fa-circle-info mr-1"></i> <span data-i18n="footerTip">Tip: Click "Beautify" to fix line breaks.</span>
            </p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-200 dark:border-gray-800 py-8 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-gray-400 dark:text-gray-600 text-sm">© 2024 PDF Extractor. <span data-i18n="privacy">100% Client-side Processing.</span></p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 flex flex-col gap-2 pointer-events-none"></div>

    <script>
        // --- Translations ---
        const translations = {
            en: {
                heroTitle: "Convert PDF to Text Instantly",
                heroSubtitle: "Securely extract text from your documents directly in your browser. No upload to server. Export to Markdown or TXT.",
                dropTitle: "Click or Drag PDF Here",
                dropSubtitle: "Supports PDFs of any size",
                selectFileBtn: "Select File",
                processingTitle: "Processing Document...",
                btnBeautify: "Beautify",
                editorLabel: "Editable Area",
                footerTip: "Tip: Click \"Beautify\" to fix line breaks from PDF.",
                privacy: "100% Client-side Processing.",
                toastFileError: "Please upload a PDF file.",
                toastSuccess: "Extraction Complete!",
                toastFail: "Extraction Failed. File might be encrypted.",
                toastCopied: "Copied to clipboard",
                toastEmpty: "No text to process",
                toastFormat: "Formatting complete!",
                toastDownload: "Downloading file...",
                pagePrefix: "Page",
                pageSuffix: ""
            },
            zh: {
                heroTitle: "瞬间将 PDF 转换为文本",
                heroSubtitle: "直接在浏览器中安全提取文档文字。无需上传服务器。支持导出 Markdown 或 TXT。",
                dropTitle: "点击或拖拽 PDF 到此处",
                dropSubtitle: "支持任意大小的 PDF 文档",
                selectFileBtn: "选择文件",
                processingTitle: "正在解析文档...",
                btnBeautify: "一键美化",
                editorLabel: "可编辑区域",
                footerTip: "提示：点击“一键美化”可修复 PDF 导致的断行。",
                privacy: "100% 本地处理，隐私安全。",
                toastFileError: "请上传 PDF 格式的文件",
                toastSuccess: "解析成功！",
                toastFail: "解析失败，文件可能已加密。",
                toastCopied: "已复制到剪贴板",
                toastEmpty: "没有可处理的文字",
                toastFormat: "格式美化完成！",
                toastDownload: "正在下载文件...",
                pagePrefix: "第",
                pageSuffix: "页"
            },
            tw: {
                heroTitle: "瞬間將 PDF 轉換為純文字",
                heroSubtitle: "直接在瀏覽器中安全地擷取文件文字，無需上傳至伺服器。支援匯出為 Markdown 或 TXT 格式。",
                dropTitle: "點擊或拖曳 PDF 至此處",
                dropSubtitle: "支援任何大小的 PDF 檔案",
                selectFileBtn: "選取檔案",
                processingTitle: "正在解析文件...",
                btnBeautify: "排版美化",
                editorLabel: "編輯區域",
                footerTip: "提示：點擊「排版美化」可修正 PDF 造成的斷行問題。",
                privacy: "100% 本地端處理，確保資訊隱私。",
                toastFileError: "請上傳 PDF 格式的檔案",
                toastSuccess: "擷取成功！",
                toastFail: "擷取失敗，檔案可能已加密或損壞。",
                toastCopied: "已複製至剪貼簿",
                toastEmpty: "沒有可處理的文字內容",
                toastFormat: "格式優化完成！",
                toastDownload: "檔案下載中...",
                pagePrefix: "第",
                pageSuffix: "頁"
            },
            ja: {
                heroTitle: "PDFを瞬時にテキストに変換",
                heroSubtitle: "ブラウザで直接、安全にドキュメントからテキストを抽出します。サーバーへのアップロードは不要。MarkdownまたはTXTにエクスポート。",
                dropTitle: "ここにPDFをクリックまたはドラッグ",
                dropSubtitle: "任意のサイズのPDFをサポート",
                selectFileBtn: "文件を選択",
                processingTitle: "ドキュメントを処理中...",
                btnBeautify: "整形",
                editorLabel: "編集エリア",
                footerTip: "ヒント: 「整形」をクリックして改行を修正します。",
                privacy: "100% クライアントサイド処理。",
                toastFileError: "PDFファイルをアップロードしてください。",
                toastSuccess: "抽出完了！",
                toastFail: "抽出に失敗しました。ファイルが暗号化されている可能性があります。",
                toastCopied: "クリップボードにコピーしました",
                toastEmpty: "処理するテキストがありません",
                toastFormat: "整形完了！",
                toastDownload: "ファイルをダウンロード中...",
                pagePrefix: "第",
                pageSuffix: "ページ"
            },
            fr: {
                heroTitle: "Convertir PDF en texte instantanément",
                heroSubtitle: "Extrayez le texte de vos documents en toute sécurité directement dans votre navigateur. Aucun téléchargement sur serveur. Exportez en Markdown ou TXT.",
                dropTitle: "Cliquez ou glissez le PDF ici",
                dropSubtitle: "Prend en charge les PDF de toute taille",
                selectFileBtn: "Sélectionner un fichier",
                processingTitle: "Traitement du document...",
                btnBeautify: "Embellir",
                editorLabel: "Zone modifiable",
                footerTip: "Conseil : Cliquez sur \"Embellir\" pour corriger les sauts de ligne.",
                privacy: "Traitement 100% côté client.",
                toastFileError: "Veuillez télécharger un fichier PDF.",
                toastSuccess: "Extraction terminée !",
                toastFail: "Échec de l'extraction. Le fichier peut être crypté.",
                toastCopied: "Copié dans le presse-papiers",
                toastEmpty: "Aucun texte à traiter",
                toastFormat: "Formatage terminé !",
                toastDownload: "Téléchargement du fichier...",
                pagePrefix: "Page",
                pageSuffix: ""
            }
        };

        const langNames = { en: 'English', zh: '中文 (简体)', tw: '繁體中文 (台灣)', ja: '日本語', fr: 'Français' };
        let currentLang = 'en';
        let currentFileName = 'document';

        function toggleLangDropdown(event) {
            event.stopPropagation();
            const dropdown = document.getElementById('lang-dropdown');
            dropdown.classList.toggle('hidden');
            updateLangOptions();
        }

        function updateLangOptions() {
            document.querySelectorAll('.lang-option').forEach(opt => {
                if (opt.dataset.lang === currentLang) opt.classList.add('active');
                else opt.classList.remove('active');
            });
        }

        window.addEventListener('click', () => {
            const dropdown = document.getElementById('lang-dropdown');
            if (!dropdown.classList.contains('hidden')) dropdown.classList.add('hidden');
        });

        function initTheme() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                updateThemeIcon(true);
            } else {
                document.documentElement.classList.remove('dark');
                updateThemeIcon(false);
            }
        }

        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.theme = isDark ? 'dark' : 'light';
            updateThemeIcon(isDark);
        }

        function updateThemeIcon(isDark) {
            const icon = document.getElementById('theme-icon');
            if (isDark) { icon.classList.replace('fa-moon', 'fa-sun'); } 
            else { icon.classList.replace('fa-sun', 'fa-moon'); }
        }

        function selectLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLang][key]) el.textContent = translations[currentLang][key];
            });
            document.getElementById('current-lang-text').textContent = langNames[lang];
        }

        const fileInput = document.getElementById('file-input');
        const uploadSection = document.getElementById('upload-section');
        const loadingSection = document.getElementById('loading-section');
        const resultSection = document.getElementById('result-section');
        const outputText = document.getElementById('output-text');
        const fileNameEl = document.getElementById('file-name');
        const pageCountEl = document.getElementById('page-count');
        const progressText = document.getElementById('progress-text');
        const dropZone = document.getElementById('drop-zone');

        initTheme();
        
        dropZone.onclick = () => fileInput.click();
        fileInput.onchange = (e) => handleFiles(e.target.files);

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(ev => dropZone.addEventListener(ev, e => {
            e.preventDefault(); e.stopPropagation();
            if (ev === 'dragenter' || ev === 'dragover') dropZone.classList.add('drag-active');
            else dropZone.classList.remove('drag-active');
            if (ev === 'drop') handleFiles(e.dataTransfer.files);
        }));

        async function handleFiles(files) {
            if (!files.length) return;
            const file = files[0];
            if (file.type !== 'application/pdf') return showToast(translations[currentLang].toastFileError, 'error');
            
            uploadSection.classList.add('hidden');
            loadingSection.classList.remove('hidden');
            currentFileName = file.name.replace('.pdf', '');
            fileNameEl.textContent = file.name;

            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                const pageLabel = (currentLang === 'ja' ? 'ページ' : (currentLang === 'en' || currentLang === 'fr' ? 'Pages' : (currentLang === 'tw' ? '頁' : '页')));
                pageCountEl.textContent = `${pdf.numPages} ${pageLabel}`;
                
                let fullText = "";
                for (let i = 1; i <= pdf.numPages; i++) {
                    progressText.textContent = `${translations[currentLang].pagePrefix} ${i} / ${pdf.numPages}`;
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    let pageText = textContent.items.map(item => item.str).join(' ');
                    const t = translations[currentLang];
                    fullText += `--- ${t.pagePrefix} ${i} ${t.pageSuffix} ---\n\n${pageText}\n\n\n`;
                }
                outputText.value = fullText;
                loadingSection.classList.add('hidden');
                resultSection.classList.remove('hidden');
                showToast(translations[currentLang].toastSuccess);
            } catch (err) {
                loadingSection.classList.add('hidden');
                uploadSection.classList.remove('hidden');
                showToast(translations[currentLang].toastFail, 'error');
            }
        }

        function formatToMarkdown() {
            let text = outputText.value;
            if (!text) return showToast(translations[currentLang].toastEmpty, 'error');
            text = text.replace(/^--- (Page|第) (\d+) (页|頁|ページ)?\s?---$/gm, '\n## Page $2\n');
            outputText.value = text.replace(/\n{3,}/g, '\n\n');
            showToast(translations[currentLang].toastFormat);
        }

        function copyText() {
            outputText.select();
            document.execCommand('copy');
            showToast(translations[currentLang].toastCopied);
        }

        function downloadFile(type) {
            if (!outputText.value) return;
            const blob = new Blob([outputText.value], { type: type === 'md' ? 'text/markdown' : 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentFileName}_extracted.${type}`;
            a.click();
            URL.revokeObjectURL(url);
            showToast(translations[currentLang].toastDownload);
        }

        function resetApp() {
            fileInput.value = ''; outputText.value = '';
            resultSection.classList.add('hidden'); uploadSection.classList.remove('hidden');
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const isDark = document.documentElement.classList.contains('dark');
            toast.className = `${type === 'error' ? 'bg-red-500' : (isDark ? 'bg-gray-700' : 'bg-slate-800')} text-white px-5 py-3 rounded-xl shadow-xl transform transition-all duration-300 translate-y-10 opacity-0 flex items-center gap-2 border border-white/10 text-sm font-medium`;
            toast.innerHTML = `<i class="fa-solid ${type === 'error' ? 'fa-circle-xmark' : 'fa-circle-check'}"></i> <span>${message}</span>`;
            container.appendChild(toast);
            requestAnimationFrame(() => toast.classList.remove('translate-y-10', 'opacity-0'));
            setTimeout(() => {
                toast.classList.add('translate-y-10', 'opacity-0');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>